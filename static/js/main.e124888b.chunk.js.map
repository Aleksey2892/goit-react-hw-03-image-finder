{"version":3,"sources":["components/services/imagesApi.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","components/Error/Error.js","components/App.js","index.js","components/Error/Error.module.scss"],"names":["axios","defaults","baseURL","apiKey","searchQuery","page","get","then","res","data","INITIAL_STATE","inputValue","Searchbar","state","handleSubmit","e","preventDefault","props","onSubmit","resetState","handleChange","target","setState","value","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","onShowModal","otherProps","largeImageURL","webformatURL","src","alt","onClick","ImageGallery","images","map","id","key","Button","onLoadMore","Loader","color","height","width","timeout","Modal","handleKeydown","code","onClose","handleMouseClick","window","addEventListener","removeEventListener","children","Error","error","s","errorBox","errorTitle","errorMessage","defaultProps","App","totalPage","loader","bigImg","handleSearchBar","inputQuery","handleLoadMore","fetchImages","imagesApi","hits","totalHits","prevState","catch","err","toString","finally","openModal","closeModal","prevProps","prevQuery","newQuery","prevPage","newPage","scrollDown","scrollTo","top","document","documentElement","scrollHeight","behavior","isShowGallery","length","isShowButton","ReactDOM","render","querySelector","module","exports"],"mappings":"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","file":"static/js/main.e124888b.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://pixabay.com';\r\nconst apiKey = '17616559-acc4465745e7b4973de900fa6';\r\n\r\nconst fetchImgWithQuery = (searchQuery = '', page = 1) => {\r\n  return axios\r\n    .get(\r\n      `/api/?q=${searchQuery}&page=${page}&key=${apiKey}&image_type=photo&orientation=horizontal&per_page=12`,\r\n    )\r\n    .then(res => res.data);\r\n};\r\n\r\nexport default { fetchImgWithQuery };\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst INITIAL_STATE = {\r\n  inputValue: '',\r\n};\r\n\r\nclass Searchbar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n\r\n  state = {\r\n    inputValue: '',\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.inputValue);\r\n    this.resetState();\r\n  };\r\n\r\n  handleChange = ({ target }) => {\r\n    this.setState({ inputValue: target.value });\r\n  };\r\n\r\n  resetState = () => {\r\n    this.setState(INITIAL_STATE);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.inputValue}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ onShowModal, otherProps }) => {\r\n  const { largeImageURL, webformatURL } = otherProps;\r\n\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={webformatURL}\r\n        alt=\"gallery-img\"\r\n        className=\"ImageGalleryItem-image\"\r\n        onClick={() => onShowModal(largeImageURL)}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  onShowModal: PropTypes.func.isRequired,\r\n  otherProps: PropTypes.shape({\r\n    largeImageURL: PropTypes.string.isRequired,\r\n    webformatURL: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\n\r\nconst ImageGallery = ({ images, onShowModal }) => (\r\n  <ul className=\"ImageGallery\">\r\n    {images.map(({ id, ...otherProps }) => (\r\n      <ImageGalleryItem\r\n        key={id}\r\n        onShowModal={onShowModal}\r\n        otherProps={otherProps}\r\n      />\r\n    ))}\r\n  </ul>\r\n);\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n    }),\r\n  ).isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Button = ({ onLoadMore }) => (\r\n  <div className=\"BtnBox\">\r\n    <button type=\"button\" className=\"Button\" onClick={onLoadMore}>\r\n      Load more\r\n    </button>\r\n  </div>\r\n);\r\n\r\nButton.propTypes = {\r\n  onLoadMore: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\n\r\nimport Spinner from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nexport default class Loader extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"BtnBox\">\r\n        <Spinner\r\n          type=\"Grid\"\r\n          color=\"#3f51b5\"\r\n          height={50}\r\n          width={50}\r\n          timeout={0}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    children: PropTypes.element.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeydown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeydown);\r\n  }\r\n\r\n  handleKeydown = ({ code }) => {\r\n    if (code === 'Escape') this.props.onClose();\r\n  };\r\n\r\n  handleMouseClick = ({ target }) => {\r\n    if (target.className === 'Overlay') this.props.onClose();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Overlay\" onClick={this.handleMouseClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './Error.module.scss';\r\n\r\nconst Error = ({ error }) => (\r\n  <div className={s.errorBox}>\r\n    <p className={s.errorTitle}>Load error:</p>\r\n    <p className={s.errorMessage}>{error}</p>\r\n  </div>\r\n);\r\n\r\nError.defaultProps = {\r\n  error: 'Unknown error. Try later :(',\r\n};\r\n\r\nError.propTypes = {\r\n  error: PropTypes.string,\r\n};\r\n\r\nexport default Error;\r\n","import React, { Component } from 'react';\r\n\r\nimport imagesApi from './services/imagesApi';\r\nimport Searchbar from './Searchbar/Searchbar';\r\nimport ImageGallery from './ImageGallery/ImageGallery';\r\nimport Button from './Button/Button';\r\nimport Loader from './Loader/Loader';\r\nimport Modal from './Modal/Modal';\r\nimport Error from './Error/Error';\r\n\r\nexport default class App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchQuery: 'popular',\r\n    page: 1,\r\n    totalPage: 0,\r\n    loader: false,\r\n    bigImg: null,\r\n    error: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({ loader: true });\r\n\r\n    this.fetchImages();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevState.searchQuery;\r\n    const newQuery = this.state.searchQuery;\r\n    const prevPage = prevState.page;\r\n    const newPage = this.state.page;\r\n\r\n    if (prevQuery !== newQuery) this.fetchImages();\r\n\r\n    if (newPage > 2 && prevPage !== newPage) this.scrollDown();\r\n  }\r\n\r\n  handleSearchBar = inputQuery => {\r\n    this.setState({ searchQuery: inputQuery, images: [], page: 1 });\r\n  };\r\n\r\n  handleLoadMore = () => {\r\n    this.fetchImages();\r\n  };\r\n\r\n  fetchImages = () => {\r\n    const { searchQuery, page } = this.state;\r\n\r\n    this.setState({ loader: true });\r\n\r\n    imagesApi\r\n      .fetchImgWithQuery(searchQuery, page)\r\n      .then(({ hits, totalHits }) =>\r\n        this.setState(prevState => ({\r\n          images: [...prevState.images, ...hits],\r\n          page: prevState.page + 1,\r\n          totalPage: totalHits,\r\n          error: null,\r\n        })),\r\n      )\r\n      .catch(err => this.setState({ error: err.toString() }))\r\n      .finally(() => this.setState({ loader: false }));\r\n  };\r\n\r\n  openModal = bigImg => {\r\n    this.setState({ bigImg: bigImg });\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ bigImg: null });\r\n  };\r\n\r\n  scrollDown() {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { images, loader, page, totalPage, bigImg, error } = this.state;\r\n    const isShowGallery = images.length > 0;\r\n    const isShowButton = isShowGallery && !loader && page !== totalPage;\r\n\r\n    return (\r\n      <>\r\n        <Searchbar onSubmit={this.handleSearchBar} />\r\n\r\n        {error && <Error error={error} />}\r\n\r\n        {isShowGallery && (\r\n          <ImageGallery images={images} onShowModal={this.openModal} />\r\n        )}\r\n\r\n        {bigImg && (\r\n          <Modal onClose={this.closeModal}>\r\n            <img src={bigImg} alt=\"big-img\" />\r\n          </Modal>\r\n        )}\r\n\r\n        {isShowButton && <Button onLoadMore={this.handleLoadMore} />}\r\n\r\n        {loader && <Loader />}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App';\n\nimport 'modern-normalize/modern-normalize.css';\nimport './base.scss';\n\nReactDOM.render(<App />, document.querySelector('#root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorBox\":\"Error_errorBox__3ZuLB\",\"errorTitle\":\"Error_errorTitle__3C2St\",\"errorMessage\":\"Error_errorMessage__3XRPF\"};"],"sourceRoot":""}