{"version":3,"sources":["services/imagesApi.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","components/Error/Error.js","components/App.js","index.js","components/Error/Error.module.scss"],"names":["axios","defaults","baseURL","apiKey","fetchImgWithQuery","a","searchQuery","page","get","axiosResp","data","INITIAL_STATE","inputValue","Searchbar","state","handleSubmit","e","preventDefault","props","onSubmit","resetState","handleChange","target","setState","value","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","onShowModal","otherProps","largeImageURL","webformatURL","src","alt","onClick","ImageGallery","images","map","id","key","Button","onLoadMore","Loader","color","height","width","timeout","Modal","handleKeydown","code","onClose","handleMouseClick","window","addEventListener","removeEventListener","children","Error","error","s","errorBox","errorTitle","errorMessage","defaultProps","App","totalPage","loader","isModalImg","handleSearchBar","inputQuery","handleLoadMore","fetchImages","imagesApi","fetchData","hits","totalHits","prevState","toString","openModal","closeModal","prevProps","prevQuery","newQuery","prevPage","newPage","scrollDown","scrollTo","top","document","documentElement","scrollHeight","behavior","isShowGallery","length","isShowButton","ReactDOM","render","querySelector","module","exports"],"mappings":"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","file":"static/js/main.ee8a8809.chunk.js","sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nconst apiKey = '17616559-acc4465745e7b4973de900fa6';\n\nconst fetchImgWithQuery = async (searchQuery = '', page = 1) => {\n  try {\n    const axiosResp = await axios.get(\n      `/api/?q=${searchQuery}&page=${page}&key=${apiKey}&image_type=photo&orientation=horizontal&per_page=12`,\n    );\n    return axiosResp.data;\n  } catch (err) {\n    throw err;\n  }\n};\n\nexport default { fetchImgWithQuery };\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst INITIAL_STATE = {\n  inputValue: '',\n};\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    inputValue: '',\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    this.props.onSubmit(this.state.inputValue);\n    this.resetState();\n  };\n\n  handleChange = ({ target }) => {\n    this.setState({ inputValue: target.value });\n  };\n\n  resetState = () => {\n    this.setState(INITIAL_STATE);\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.inputValue}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ImageGalleryItem = ({ onShowModal, otherProps }) => {\n  const { largeImageURL, webformatURL } = otherProps;\n\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={webformatURL}\n        alt=\"gallery-img\"\n        className=\"ImageGalleryItem-image\"\n        onClick={() => onShowModal(largeImageURL)}\n      />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  onShowModal: PropTypes.func.isRequired,\n  otherProps: PropTypes.shape({\n    largeImageURL: PropTypes.string.isRequired,\n    webformatURL: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ImageGalleryItem from './ImageGalleryItem';\n\nconst ImageGallery = ({ images, onShowModal }) => (\n  <ul className=\"ImageGallery\">\n    {images.map(({ id, ...otherProps }) => (\n      <ImageGalleryItem\n        key={id}\n        onShowModal={onShowModal}\n        otherProps={otherProps}\n      />\n    ))}\n  </ul>\n);\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }),\n  ).isRequired,\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ onLoadMore }) => (\n  <div className=\"BtnBox\">\n    <button type=\"button\" className=\"Button\" onClick={onLoadMore}>\n      Load more\n    </button>\n  </div>\n);\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\n\nimport Spinner from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default class Loader extends Component {\n  render() {\n    return (\n      <div className=\"BtnBox\">\n        <Spinner\n          type=\"Grid\"\n          color=\"#3f51b5\"\n          height={50}\n          width={50}\n          timeout={0}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    children: PropTypes.element.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  handleKeydown = ({ code }) => {\n    if (code === 'Escape') this.props.onClose();\n  };\n\n  handleMouseClick = ({ target }) => {\n    if (target.className === 'Overlay') this.props.onClose();\n  };\n\n  render() {\n    return (\n      <div className=\"Overlay\" onClick={this.handleMouseClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './Error.module.scss';\n\nconst Error = ({ error }) => (\n  <div className={s.errorBox}>\n    <p className={s.errorTitle}>Load error:</p>\n    <p className={s.errorMessage}>{error}</p>\n  </div>\n);\n\nError.defaultProps = {\n  error: 'Unknown error. Try later :(',\n};\n\nError.propTypes = {\n  error: PropTypes.string,\n};\n\nexport default Error;\n","import React, { Component } from 'react';\n\nimport imagesApi from '../services/imagesApi';\nimport Searchbar from './Searchbar/Searchbar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport Button from './Button/Button';\nimport Loader from './Loader/Loader';\nimport Modal from './Modal/Modal';\nimport Error from './Error/Error';\n\nexport default class App extends Component {\n  state = {\n    images: [],\n    searchQuery: 'popular',\n    page: 1,\n    totalPage: 0,\n    loader: false,\n    isModalImg: null,\n    error: null,\n  };\n\n  componentDidMount() {\n    this.setState({ loader: true });\n\n    this.fetchImages();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.searchQuery;\n    const newQuery = this.state.searchQuery;\n    const prevPage = prevState.page;\n    const newPage = this.state.page;\n\n    if (prevQuery !== newQuery) this.fetchImages();\n\n    if (newPage > 2 && prevPage !== newPage) this.scrollDown();\n  }\n\n  handleSearchBar = inputQuery => {\n    this.setState({ searchQuery: inputQuery, images: [], page: 1 });\n  };\n\n  handleLoadMore = () => {\n    this.fetchImages();\n  };\n\n  fetchImages = async () => {\n    const { searchQuery, page } = this.state;\n\n    this.setState({ loader: true });\n\n    try {\n      const fetchData = await imagesApi.fetchImgWithQuery(searchQuery, page);\n      const { hits, totalHits } = fetchData;\n\n      this.setState(prevState => ({\n        images: [...prevState.images, ...hits],\n        page: prevState.page + 1,\n        totalPage: totalHits,\n        error: null,\n      }));\n    } catch (err) {\n      this.setState({ error: err.toString() });\n    } finally {\n      this.setState({ loader: false });\n    }\n  };\n\n  openModal = isModalImg => {\n    this.setState({ isModalImg: isModalImg });\n  };\n\n  closeModal = () => {\n    this.setState({ isModalImg: null });\n  };\n\n  scrollDown() {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  render() {\n    const { images, loader, page, totalPage, isModalImg, error } = this.state;\n    const isShowGallery = images.length > 0;\n    const isShowButton = isShowGallery && !loader && page !== totalPage;\n\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSearchBar} />\n\n        {error && <Error error={error} />}\n\n        {isShowGallery && (\n          <ImageGallery images={images} onShowModal={this.openModal} />\n        )}\n\n        {isModalImg && (\n          <Modal onClose={this.closeModal}>\n            <img src={isModalImg} alt=\"big-img\" />\n          </Modal>\n        )}\n\n        {isShowButton && <Button onLoadMore={this.handleLoadMore} />}\n\n        {loader && <Loader />}\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App';\n\nimport 'modern-normalize/modern-normalize.css';\nimport './base.scss';\n\nReactDOM.render(<App />, document.querySelector('#root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorBox\":\"Error_errorBox__3ZuLB\",\"errorTitle\":\"Error_errorTitle__3C2St\",\"errorMessage\":\"Error_errorMessage__3XRPF\"};"],"sourceRoot":""}